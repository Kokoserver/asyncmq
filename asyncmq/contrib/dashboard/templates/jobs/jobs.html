{% extends "layout.html" %}
{% block content %}
  <h1 class="text-2xl font-bold mb-4">
    Jobs in Queue “{{ queue }}” ({{ state }})
  </h1>

  <table class="min-w-full bg-white mb-4">
    <thead>
      <tr>
        <th>ID</th>
        <th>Args</th>
        <th>Kwargs</th>
        <th>Created</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for job in jobs %}
      <tr>
        <td>{{ job.id }}</td>
        <td><pre>{{ job.args }}</pre></td>
        <td><pre>{{ job.kwargs }}</pre></td>
        <td>{{ job.created }}</td>
        <td>
          <form method="post" class="inline">
            <input type="hidden" name="job_id" value="{{ job.id }}">
            <input type="hidden" name="state" value="{{ state }}">
            <button name="action" value="retry"
                    class="px-2 py-1 bg-green-600 text-white rounded">
              Retry
            </button>
            <button name="action" value="remove"
                    class="px-2 py-1 bg-red-600 text-white rounded">
              Delete
            </button>
            <button name="action" value="cancel"
                    class="px-2 py-1 bg-yellow-600 text-white rounded">
              Cancel
            </button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="5" class="italic text-gray-600">
          No jobs found in this state.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <nav class="flex justify-between items-center">
    {% if page > 1 %}
      <a href="?state={{ state }}&page={{ page-1 }}&size={{ size }}"
         class="px-4 py-2 bg-gray-200 rounded">Previous</a>
    {% else %}
      <span></span>
    {% endif %}

    <span>Page {{ page }} of {{ total_pages }}</span>

    {% if page < total_pages %}
      <a href="?state={{ state }}&page={{ page+1 }}&size={{ size }}"
         class="px-4 py-2 bg-gray-200 rounded">Next</a>
    {% else %}
      <span></span>
    {% endif %}
  </nav>
{% endblock %}
